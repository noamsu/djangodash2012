{% extends "base.html" %}
{% load custom_tags %}

{% block main %}

Thread page for: {{thread.content}}
<br />
<br />
<form action="/add_comment" method="POST">
	{% csrf_token %}
	Write a comment
	<div><textarea name="content" rows="3" cols="50"></textarea></div>
	<input type="hidden" name="thread_id" value="{{thread.pk}}" />
	<input class="comment-input" type='submit' value="Create new comment" />
</form>

{% for comment in structure %}
	{{comment|format_threaded_comments}}
{% endfor %}

<script type="text/javascript">
	function get_last_char(str){
		return str.split("_")[1];
	}

	$(".reply-link").click(function(){
		var id = $(this).parent().attr("id");
		var last_char = get_last_char(id);
		// specifically, form with...
		$("#" + last_char).slideDown("fast")
	})

</script>

{% endblock %}